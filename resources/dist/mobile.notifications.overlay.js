this.mfModules=this.mfModules||{},this.mfModules["mobile.notifications.overlay"]=(window.jsonElo123=window.jsonElo123||[]).push([[10],{"./src/mobile.notifications.overlay/NotificationsFilterOverlay.js":function(i,o,t){var e,n=t("./src/mobile.startup/Overlay.js"),a=t("./src/mobile.startup/util.js");t("./src/mobile.startup/mfExtend.js")(e=function(i){var o=this;n.call(this,a.extend({className:"overlay notifications-filter-overlay notifications-overlay navigation-drawer"},i)),this.on("hide",function(){i.mainMenu.closeNavigationDrawers()}),i.$crossWikiUnreadFilter.on("click",function(){o.hide()}),i.$notifReadState.find(".oo-ui-buttonElement").on("click",function(){o.hide()}),this.$el.find(".overlay-content").append(this.parseHTML("<div>").addClass("notifications-filter-overlay-read-state").append(i.$notifReadState),i.$crossWikiUnreadFilter)},n,{defaults:a.extend({},n.prototype.defaults,{heading:mw.msg("mobile-frontend-notifications-filter-title")}),preRender:function(){this.options.heading="<strong>"+mw.message("mobile-frontend-notifications-filter-title").escaped()+"</strong>"}}),i.exports=e},"./src/mobile.notifications.overlay/list.js":function(i,o,t){var e=t("./src/mobile.startup/util.js"),n=t("./src/mobile.startup/View.js"),a=t("./src/mobile.startup/promisedView.js");i.exports=function(i,o,t,s){var r,l=mw.config.get("wgEchoMaxNotificationCount"),c=new i.api.EchoApi,f=new i.dm.UnreadNotificationCounter(c,"all",l),d=new i.dm.ModelManager(f,{type:["message","alert"]}),m=new i.Controller(c,d,{type:["message","alert"]}),u=function(){o.toggle(m.manager.hasLocalUnread())},p=e.parseHTML("<div>").addClass("notifications-overlay-overlay position-fixed");return i.config.maxPrioritizedActions=1,r=new i.ui.NotificationsWrapper(m,d,{$overlay:p}),o.toggle(!1),f.on("countChange",function(i){t(m.manager.getUnreadCounter().getCappedNotificationCount(i)),u()}),o.on("click",function(){var i=m.manager.getLocalUnread().length;m.markLocalNotificationsRead().then(function(){mw.notify(mw.msg("echo-mark-all-as-read-confirmation",i)),o.toggle(!1)},function(){o.toggle(!1)})}),a(r.populate().then(function(){return m.updateSeenTime(),s(),u(),d.on("update",u),n.make({},[r.$element,p])}))}},"./src/mobile.notifications.overlay/mobile.notifications.overlay.js":function(i,o,t){var e=t("./src/mobile.startup/moduleLoaderSingleton.js"),n=t("./src/mobile.startup/notifications/overlay.js"),a=t("./src/mobile.notifications.overlay/list.js"),s=t("./src/mobile.notifications.overlay/NotificationsFilterOverlay.js");e.define("mobile.notifications.overlay",{list:a}),e.define("mobile.notifications.overlay/NotificationsFilterOverlay",s),e.deprecate("mobile.notifications.overlay/NotificationsOverlay",function(i){return n(function(o){i.badge.setCount(o)},function(){i.badge.markAsSeen()})})}},[["./src/mobile.notifications.overlay/mobile.notifications.overlay.js",0,1]]]);
//# sourceMappingURL=mobile.notifications.overlay.js.map.json